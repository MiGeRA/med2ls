# Mega EverDrive Tools (med2ls)
"Mega EverDrive Tools" is small code: lets use it in any SGDK-project and be able to remotely reboot the system and return to Mega EverDrive's main menu of the  without touching the console - very convenient when debugging and not only.

Представляю маленькую "библиотечку" с примером ее применения в виде проекта VS-Code в рамках программирования для Sega MegaDrive|Genesis с использованием SGDK и отладки плодов своего творчества в аппаратной среде посредствам Mega EverDrive v2 (X7).

Использование представленного кода предполагает работу со штатной утилитой загрузки контента Mega EverDrive - утилитой  [mega-usb](https://github.com/MiGeRA/Mega-EverDrive-Uploader).

Системное ПО EverDrive допускает предачу и запуск программ (внезапно?) через USB-соединение - утилита mega-usb в помощь. При запуске программы (игры) USB-соединение полностью переходит под управление данной программы. Подавляющее большинство которых не использует его (даже не догадываяь о таком досадном моменте) - соотвественно для запуска новой программы (обновленной версии текущей) необходимо вернуться в главное меню системного ПО EverDrive. Путей несколько: "передернуть" питание; жамкнуть "ресет" на приставке; воспользоваться "внутриигровым" меню EverDrive (DOWN+START) ... Все они предусматривают тактильно взаимодействие либо с самой приставкой, любо с ее джойстиком. В случае создания и отладки софта "в железе" с использованием возможности его загрузки через USB-соединение видится логичным и удобным реалиация программной возможности возврата в главное меню по команде через USB-соединение для последующей аналогичной загрузки ...

Простое включение библиотеки **med2ls** в ваш проект SGDK дает следующие ...
#### Возможности:
+ Загружать обновленную (вновь скомпиллированную версию, например) без физического взаимобействия с приставкой. Все управление чисто по USB-интерфейсу. Т.е. не нужно жать RESET чтобы вернуться в главное меню EverDrive для возможности повтороной загрузки и запуска программы - просто инициируйте штатаный процесс запуска программы в mega-usb поверх уже запущенной;
+ Осуществлять возврат (выход) в главное меню EverDrive из вашей программы по комбинации "горячих клавиш" (в предложенном варианте START+A+B+C - легко изменить при желании);
+ Возврат в главное меню EverDrive по управляюшей последовательности, получаемой через USB-соединение;
+ Возможность реализовать выход в главное меню EverDrive в любом месте вашей программы на ваше усмотрение ("программный выход" - логичная тривиальная функция).

#### Использовать так:
В любом случае копируем в доступное место файлы med2ls.c и med2ls.h, делаем включение в модуле main:
```
#include "med2ls.h"
```

Для реализации первых трех пунктов "возможностей" - просто добавляем в основной бесконечный цикл вызов:
```
MED2ls_RetWacthDog();
```

Для пользовательского возврата - пишем в нудном месте:
```
MED2ls_Return();
```

Все просто ... :-)

*PS. Учесть, что для взаимодействия по USB-соединению при использовании Mega EverDrive совместно с утилитой mega-usb (и не только) необходимо активировать режим -ssf*
